// JoyShtick.html 
// Matthew Olsson 10/10/2014
// JoyShtick.js Library 
// http://joyshtickblog.blogspot.com/

<!DOCTYPE html>
<html>

<head>
<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, 
    user-scalable=no, initial-scale=1, maximum-scale=1, user-scalable=0" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

<style type="text/css">
	body { margin: 0; padding: 0; background: #000;}
	//canvas { display: block; margin: 0 auto; background: #fff; }
</style>
<script src="JoyShtick.js"></script>
<script>

	window.onload = init;

	window.requestAnimFrame = (function(){
        return  window.requestAnimationFrame       || 
        window.webkitRequestAnimationFrame || 
        window.mozRequestAnimationFrame    || 
        window.oRequestAnimationFrame      || 
        window.msRequestAnimationFrame     || 
        function(/* function */ callback, /* DOMElement */ element){
            window.setTimeout(callback, 1000 / 60);
        };
	})();

	var playerX, playerY,ctx;
	var PLAYER_WIDTH = 5;

	function init(){
		var host = document.getElementById("main");
		ctx = host.getContext("2d");
		var result = viewport();
		host.height = result.height;
		host.width = result.width;

		var test = new JoyShtick(host.width,host.height);
		var hello = function(){ console.log("hello"); }
		var goodbye = function(){ console.log("Goodbye"); }

		// x,y,function,color(rgba),shape,width
		test.addButton("85%","60%",goodbye,"rgba(0,0,255,.5)","square","6%");
		test.addButton("80%","80%",hello,"rgba(255,0,0,.5)","circle","6%");
	}

	function animate() {
	    requestAnimFrame( animate );
	    // move player
	    updatePlayer();
	    // draw player
	    draw();
	}

	function draw() {
		ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.width);
	    ctx.fillStyle = "red";
	    ctx.fillRect(playerX,playerY,PLAYER_WIDTH,PLAYER_WIDTH);
	}

	function viewport() {
		var e = window
		, a = 'inner';
		if ( !( 'innerWidth' in window ) )
		{
		a = 'client';
		e = document.documentElement || document.body;
		}
		return { width : e[ a+'Width' ] , height : e[ a+'Height' ] }
	}
</script>
</head>
<body>
	<canvas id="main" style="position: absolute; left: 0; top: 0;"></canvas>
</body>
</html>